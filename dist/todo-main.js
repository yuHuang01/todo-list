(()=>{"use strict";class e{constructor(e,t,n){this.title=e,this.date=t,this.description=n,this.sub=[]}}const t=function(e){if(13===e.keyCode){const t=e.target.parentNode.parentNode.firstChild.textContent,o=document.getElementById("sub-pro-input").value;((e,t)=>{const n=JSON.parse(localStorage.getItem(e));n.sub.push(t);const o=JSON.stringify(n);localStorage.setItem(e,o)})(t,o);const a=e.target.parentNode;n(a,o),e.target.parentNode.removeChild(document.getElementById("sub-pro-input"))}},n=function(e,t){const n=document.createElement("p");n.className="title",n.textContent=t;const a=document.createElement("span");a.classList="material-icons icon done-icon sub-div-icon",a.textContent="done_outline",a.addEventListener("click",o);const c=document.createElement("span");c.classList="material-icons icon delete-icon",c.textContent="delete_outline",c.addEventListener("click",o),e.appendChild(n),e.appendChild(a),e.appendChild(c)},o=function(e){const n=e.target.classList;if(n.contains("add-icon"))if("sub-pro-input"!==e.target.parentNode.lastChild.firstChild.id){let n=document.createElement("div");n.className="subproject-div";let o=document.createElement("input");o.type="text",o.className="sub-title-input",o.id="sub-pro-input",n.appendChild(o),o.addEventListener("keydown",t),e.target.parentNode.appendChild(n)}else alert("You have to give a title to the previous task you wanted to input!");else if(n.contains("done-icon"))e.target.parentNode.firstElementChild.style.textDecoration="line-through";else{const t=e.target.parentNode,n=t.parentNode,o=n.getElementsByTagName("P")[0].textContent,a=t.getElementsByTagName("P")[0].textContent;n.removeChild(t),((e,t,n)=>{if(n.classList.contains("project-div"))localStorage.removeItem(e);else{const n=JSON.parse(localStorage.getItem(e));n.sub.splice(n.sub.indexOf(t),1);const o=JSON.stringify(n);console.log(o),localStorage.setItem(e,o)}})(o,a,t)}},a=function(e,t,n){const a=document.createElement("div");a.className="project-div";const l=document.createElement("p");l.className="title",l.textContent=e;const i=document.createElement("p");i.className="deadline",i.textContent=t;const d=document.createElement("p");d.className="description",d.textContent=n;const s=document.createElement("span");s.classList="material-icons icon add-icon",s.textContent="add",s.addEventListener("click",o);const r=document.createElement("span");r.classList="material-icons icon done-icon",r.textContent="doneoutline",r.addEventListener("click",o);const m=document.createElement("span");m.classList="material-icons icon delete-icon",m.textContent="deleteoutline",m.addEventListener("click",o),a.appendChild(l),a.appendChild(i),a.appendChild(d),a.appendChild(s),a.appendChild(r),a.appendChild(m),document.body.appendChild(a),c()},c=()=>{let e=document.getElementById("title"),t=document.getElementById("description"),n=document.getElementById("date");e.value="",n.value="",t.value=""};let l=document.getElementById("title"),i=document.getElementById("description"),d=document.getElementById("date");document.getElementById("project-add").addEventListener("click",(()=>{((t,n,o)=>{const a=new e(t,n,o),c=JSON.stringify(a);localStorage.setItem(t,c)})(l.value,d.value,i.value),a(l.value,i.value,d.value)}));for(let e=0;e<localStorage.length;e++){const t=JSON.parse(localStorage.getItem(localStorage.key(e)));a(t.title,t.date,t.description);for(let e=0;e<t.sub.length;e++){const o=document.createElement("div");o.className="subproject-div",n(o,t.sub[e]),document.body.lastChild.appendChild(o)}}})();